{
  "metadata": {
    "title": "Fixing SQL Server Error 18456: Login Failed Solutions",
    "slug": "fix-sql-server-error-18456",
    "uniqueId": "13be97ee",
    "category": "databases",
    "subcategory": "mysql",
    "description": "Troubleshoot and resolve Microsoft SQL Server Error 18456, a common login failure, with detailed solutions for authentication modes, user accounts, and network configurations.",
    "tags": [
      "sql-server",
      "error-handling",
      "authentication",
      "troubleshooting",
      "database-connection",
      "ssms",
      "login-failed"
    ],
    "difficulty": "intermediate",
    "readTime": 12,
    "lastUpdated": "2024-09-21T12:30:00.000Z",
    "sourceStackOverflowId": "20923015",
    "votes": 375
  },
  "content": "# Fixing SQL Server Error 18456: Login Failed Solutions\n\nWhen attempting to connect to Microsoft SQL Server, encountering \"Error 18456\" is a common and often frustrating experience. This error code signifies a login failure, but its root cause can vary widely, from incorrect credentials and authentication settings to network issues or disabled accounts. Understanding the specific \"state\" associated with the error is crucial for effective troubleshooting.\n\n## Quick Answer\n\nSQL Server Error 18456 indicates a login failure. The most common solutions involve:\n\n1.  **Enabling Mixed Mode Authentication:** Configure SQL Server to allow both Windows and SQL Server Authentication.\n2.  **Creating/Verifying SQL Login:** Ensure the user account exists and has the correct permissions.\n3.  **Restarting SQL Server Services:** Apply configuration changes by restarting the SQL Server service.\n4.  **Checking Error Logs:** Consult the SQL Server error log or Event Viewer for a more detailed \"state\" code, which pinpoints the exact reason for the failure.\n\n## Choose Your Method\n\nUse this decision tree to navigate to the most relevant solution based on your specific scenario.\n\n```mermaid\ngraph TD\n    A[Start: Encountered SQL Server Error 18456?] --> B{Can you connect with Windows Authentication?};\n    B -- Yes --> C{Trying to use SQL Server Authentication?};\n    B -- No --> D{Check SQL Server Error Log/Event Viewer for 'State' code};\n\n    C -- Yes --> C1{Is Mixed Mode Authentication enabled?};\n    C1 -- No --> C2[Enable Mixed Mode Authentication & Restart SQL Services];\n    C1 -- Yes --> C3{Does the SQL Login exist and have correct password?};\n    C3 -- No --> C4[Create/Reset SQL Login & Restart SQL Services];\n    C3 -- Yes --> C5[Check Network Configuration (TCP/IP, Named Pipes, Firewall)];\n\n    D --> D1{State 1 (Generic)?};\n    D1 -- Yes --> D2[Enable Mixed Mode, Check Login, Restart Services, Run SSMS as Admin];\n    D --> D3{State 2, 5 (Invalid UserID)?};\n    D3 -- Yes --> D4[Verify Login Name, Ensure Login Exists, Check Default Database];\n    D --> D5{State 6 (Windows Login with SQL Auth)?};\n    D5 -- Yes --> D6[Use Windows Authentication or Create SQL Login];\n    D --> D7{State 7, 8, 9 (Password Mismatch/Disabled)?};\n    D7 -- Yes --> D8[Reset Password, Enable Login, Check Password Security Policy];\n    D --> D9{State 11, 12 (Valid Login, Server Access Failure)?};\n    D9 -- Yes --> D10[Check User Permissions on Database/Server Roles];\n    D --> D11{State 13 (Service Paused)?};\n    D11 -- Yes --> D12[Restart SQL Server Service];\n    D --> D13{State 18 (Change Password Required)?};\n    D13 -- Yes --> D14[Change Password for the Login];\n    D --> D15{Other State?};\n    D15 -- Yes --> D16[Consult Microsoft Documentation for specific state code];\n\n    C2 --> E[Try Connecting Again];\n    C4 --> E;\n    C5 --> E;\n    D2 --> E;\n    D4 --> E;\n    D6 --> E;\n    D8 --> E;\n    D10 --> E;\n    D12 --> E;\n    D14 --> E;\n    D16 --> E;\n```\n\n## Table of Contents\n\n1.  Quick Answer\n2.  Choose Your Method\n3.  Understanding Error 18456 and State Codes\n4.  Solution 1: Enable Mixed Mode Authentication\n5.  Solution 2: Verify and Create SQL Server Logins\n6.  Solution 3: Restart SQL Server Services\n7.  Solution 4: Check Network Protocols and Firewall\n8.  Solution 5: Run SQL Server Management Studio (SSMS) as Administrator\n9.  Solution 6: Debugging with Event Viewer and Error Logs\n10. Solution 7: Address Specific State Codes\n11. Common Problems & Solutions\n12. Summary\n\n## Understanding Error 18456 and State Codes\n\nError 18456 is a generic login failure message in SQL Server. To effectively troubleshoot, you need to find the accompanying \"state\" code, which provides more specific details about why the login failed. This state code is often hidden for security reasons (sometimes appearing as `State 1` in client applications) but can be found in the SQL Server error logs or Windows Event Viewer.\n\n![SQL Server Error 18456 Overview](/images/13be97ee-1.webp)\n\n### Common State Codes and Their Meanings:\n\n*   **State 1:** Generic failure, often used to obscure the true reason. Requires checking server logs.\n*   **State 2, 5:** Invalid UserID. The login name provided does not exist or is incorrect.\n*   **State 6:** Attempt to use a Windows login name with SQL Server Authentication.\n*   **State 7:** Login disabled and password mismatch.\n*   **State 8:** Password mismatch.\n*   **State 9:** Invalid password.\n*   **State 11, 12:** Valid login but server access failure (e.g., user lacks permissions to connect to the specific database).\n*   **State 13:** SQL Server service paused.\n*   **State 18:** Change password required.\n\n## Solution 1: Enable Mixed Mode Authentication\n\nIf you're trying to connect using SQL Server Authentication (e.g., with a username like `sa`), but the server is only configured for Windows Authentication, you'll get Error 18456.\n\n**Steps:**\n\n1.  **Connect to SQL Server Management Studio (SSMS)** using Windows Authentication (if possible). If you can't connect at all, you might need to start SQL Server in single-user mode to make this change.\n2.  **Right-click on your server instance** in Object Explorer and select **Properties**.\n3.  Go to the **Security** page.\n4.  Under \"Server authentication,\" select the **\"SQL Server and Windows Authentication mode\"** radio button.\n5.  Click **OK**.\n6.  **Restart SQL Server Services** for the changes to take effect (see Solution 3).\n\n![Enable Mixed Mode Authentication](/images/13be97ee-2.webp)\n\n## Solution 2: Verify and Create SQL Server Logins\n\nEven with Mixed Mode enabled, you need to ensure the specific SQL Server login you're using exists and has the correct password.\n\n**Steps:**\n\n1.  **Connect to SSMS** (using Windows Authentication or an existing SQL login).\n2.  Expand **Security** > **Logins**.\n3.  **Check if your desired login exists.** If not, right-click on **Logins** and select **New Login...**.\n4.  For a new login:\n    *   Enter a **Login name**.\n    *   Select **SQL Server authentication**.\n    *   Enter and confirm a **Password**.\n    *   (Optional but recommended) Uncheck \"Enforce password policy\" and \"Enforce password expiration\" for development, but keep them checked for production.\n    *   Set the **Default database** to `master` or a database the user has explicit access to.\n5.  **Grant necessary permissions:** Go to \"User Mapping\" to map the login to specific databases and assign roles (e.g., `db_owner` for full access, or more granular permissions).\n6.  Click **OK**.\n7.  **Restart SQL Server Services** (see Solution 3).\n\n## Solution 3: Restart SQL Server Services\n\nMany configuration changes, including authentication mode and new login creations, require a restart of the SQL Server service to take effect.\n\n**Steps:**\n\n1.  Open **SQL Server Configuration Manager** (search for it in Windows Start Menu).\n2.  In the left pane, expand **SQL Server Services**.\n3.  Right-click on your SQL Server instance (e.g., `SQL Server (MSSQLSERVER)` or `SQL Server (SQLEXPRESS)`) and select **Restart**.\n    *   Alternatively, you can go to Windows Services (search for `services.msc`), find the SQL Server service, and restart it there.\n\n![Restart SQL Server Service](/images/13be97ee-3.webp)\n\n## Solution 4: Check Network Protocols and Firewall\n\nNetwork-related issues can also cause Error 18456, especially if you're connecting from a remote machine.\n\n**Steps:**\n\n1.  Open **SQL Server Configuration Manager**.\n2.  Expand **SQL Server Network Configuration** > **Protocols for [YourInstanceName]**.\n3.  Ensure **Named Pipes** and **TCP/IP** are **Enabled**.\n4.  If TCP/IP is enabled, double-click it and go to the **IP Addresses** tab. Ensure the correct IP addresses are enabled and that the **TCP Port** (default 1433) is correctly configured.\n5.  **Check your Windows Firewall:** Ensure that inbound rules are configured to allow connections to SQL Server (default port 1433) for both TCP and UDP.\n    *   Go to Control Panel > Windows Defender Firewall > Advanced settings > Inbound Rules.\n    *   Create a new rule to allow TCP port 1433.\n\n## Solution 5: Run SQL Server Management Studio (SSMS) as Administrator\n\nSometimes, SSMS itself might not have sufficient permissions to establish a connection, particularly when dealing with Windows Authentication or certain network configurations.\n\n**Steps:**\n\n1.  Locate the SSMS shortcut (e.g., in the Start Menu).\n2.  Right-click on the SSMS icon.\n3.  Select **\"Run as administrator.\"**\n4.  Attempt to connect to your SQL Server instance.\n\n## Solution 6: Debugging with Event Viewer and Error Logs\n\nFor a definitive diagnosis, especially when the client error shows `State 1`, checking the server-side logs is essential.\n\n**Steps (Windows Event Viewer):**\n\n1.  Open **Event Viewer** (search for it in Windows Start Menu).\n2.  Navigate to **Windows Logs** > **Application**.\n3.  Look for recent `Error` or `Warning` events from the `MSSQLSERVER` source. These entries often contain the specific `State` code and a more detailed reason for the 18456 error.\n\n**Steps (SQL Server Error Log):**\n\n1.  **Connect to SSMS** (if possible, using Windows Authentication).\n2.  In Object Explorer, expand **Management** > **SQL Server Logs**.\n3.  Open the **Current** log. Search for entries related to login failures around the time you encountered the error.\n\n![Event Viewer for SQL Server Errors](/images/13be97ee-4.webp)\n\n## Solution 7: Address Specific State Codes\n\nOnce you've identified the specific state code from the logs, you can target your troubleshooting more precisely.\n\n*   **State 2, 5 (Invalid UserID):**\n    *   Double-check the login name for typos.\n    *   Ensure the login actually exists under `Security > Logins` in SSMS.\n    *   If using a default database other than `master`, ensure the login has a user mapped to that database.\n*   **State 6 (Windows Login with SQL Auth):**\n    *   If you intend to use a Windows user, select \"Windows Authentication\" in the SSMS login dialog.\n    *   If you intend to use SQL Server Authentication, create a dedicated SQL login (Solution 2).\n*   **State 7, 8, 9 (Password Mismatch/Disabled):**\n    *   Reset the password for the SQL login.\n    *   Ensure the login is not disabled (check login properties in SSMS, General page, \"Login enabled\" checkbox).\n    *   If \"Enforce password policy\" is enabled, ensure the new password meets complexity requirements.\n*   **State 11, 12 (Valid Login, Server Access Failure):**\n    *   The login exists, but the user might not have permissions to connect to the specific database or server.\n    *   In SSMS, check the login's \"User Mapping\" to ensure it's mapped to the target database and has appropriate roles (e.g., `db_datareader`, `db_datawriter`).\n*   **State 13 (SQL Server service paused):**\n    *   Restart the SQL Server service (Solution 3).\n*   **State 18 (Change password required):**\n    *   The login's password has expired or is marked for change on next login.\n    *   Log in with a different account (e.g., Windows Auth) and change the password for the affected SQL login.\n\n## Common Problems & Solutions\n\n*   **\"State 1\" is all I see:** This is a security measure. Always check the SQL Server error logs or Windows Event Viewer on the server for the true state code.\n*   **Can't connect to SSMS at all:** Try running SSMS as Administrator. If still unable, you might need to start SQL Server in single-user mode to enable mixed authentication or create a new admin login.\n*   **New login not working:** Did you restart the SQL Server service after creating or modifying the login? This is a common oversight.\n*   **Connecting from a different machine:** Ensure your firewall allows inbound connections on port 1433 (or your custom SQL port). Also, verify that TCP/IP protocol is enabled in SQL Server Configuration Manager.\n*   **Default database issue:** If a user's default database is set to one they don't have access to, they might get Error 18456. Change the default database to `master` or one they have explicit permissions for.\n*   **Locked account:** Multiple failed login attempts can lock a SQL Server account. You might need to unlock it using `ALTER LOGIN [YourLoginName] WITH PASSWORD=UNLOCK;` (requires an admin login).\n\n## Summary\n\nSQL Server Error 18456 is a general login failure, but by systematically checking authentication modes, user credentials, network configurations, and critically, the detailed \"state\" code in the server's error logs, you can pinpoint and resolve the underlying issue. Always remember to restart SQL Server services after making significant configuration changes.\n\n---\n\n## Image Generation Prompts\n\n**PLACEHOLDER-1:** A conceptual diagram illustrating the troubleshooting flow for SQL Server Error 18456. Start with \"Client attempts connection\" -> \"SQL Server receives request\" -> \"Authentication Fails (Error 18456)\". Branch from \"Authentication Fails\" to \"Check SQL Server Error Log/Event Viewer\" which then leads to \"Detailed State Code (e.g., State 8: Password Mismatch)\". Use icons for client (laptop), server (database icon), and logs (scroll icon).\n\n**PLACEHOLDER-2:** A screenshot or mock-up of the SQL Server Management Studio (SSMS) Server Properties window, specifically highlighting the \"Security\" page. The \"Server authentication\" section should clearly show the \"SQL Server and Windows Authentication mode\" radio button selected. Add an arrow pointing to the \"OK\" button.\n\n**PLACEHOLDER-3:** A screenshot or mock-up of the SQL Server Configuration Manager. The left pane should show \"SQL Server Services\" expanded, and the right pane should display the SQL Server instance (e.g., \"SQL Server (MSSQLSERVER)\"). A context menu should be open on the instance, with \"Restart\" highlighted.\n\n**PLACEHOLDER-4:** A screenshot or mock-up of the Windows Event Viewer, showing the \"Application\" log. Highlight a recent error entry from the \"MSSQLSERVER\" source, with the details pane open, showing \"Error: 18456, Severity: 14, State: [a specific state number like 5 or 8]\". The relevant parts of the error message should be visible.",
  "originalFormat": {
    "image_prompts": {
      "prompts": {
        "PLACEHOLDER-1": "A conceptual diagram illustrating the troubleshooting flow for SQL Server Error 18456. Start with \"Client attempts connection\" -> \"SQL Server receives request\" -> \"Authentication Fails (Error 18456)\". Branch from \"Authentication Fails\" to \"Check SQL Server Error Log/Event Viewer\" which then leads to \"Detailed State Code (e.g., State 8: Password Mismatch)\". Use icons for client (laptop), server (database icon), and logs (scroll icon).",
        "PLACEHOLDER-2": "A screenshot or mock-up of the SQL Server Management Studio (SSMS) Server Properties window, specifically highlighting the \"Security\" page. The \"Server authentication\" section should clearly show the \"SQL Server and Windows Authentication mode\" radio button selected. Add an arrow pointing to the \"OK\" button.",
        "PLACEHOLDER-3": "A screenshot or mock-up of the SQL Server Configuration Manager. The left pane should show \"SQL Server Services\" expanded, and the right pane should display the SQL Server instance (e.g., \"SQL Server (MSSQLSERVER)\"). A context menu should be open on the instance, with \"Restart\" highlighted.",
        "PLACEHOLDER-4": "A screenshot or mock-up of the Windows Event Viewer, showing the \"Application\" log. Highlight a recent error entry from the \"MSSQLSERVER\" source, with the details pane open, showing \"Error: 18456, Severity: 14, State: [a specific state number like 5 or 8]\". The relevant parts of the error message should be visible."
      },
      "titles": {
        "PLACEHOLDER-1": "SQL Server Error 18456 Overview",
        "PLACEHOLDER-2": "Enable Mixed Mode Authentication",
        "PLACEHOLDER-3": "Restart SQL Server Service",
        "PLACEHOLDER-4": "Event Viewer for SQL Server Errors"
      },
      "count": 4,
      "placeholder_list": [
        [
          "SQL Server Error 18456 Overview",
          "1"
        ],
        [
          "Enable Mixed Mode Authentication",
          "2"
        ],
        [
          "Restart SQL Server Service",
          "3"
        ],
        [
          "Event Viewer for SQL Server Errors",
          "4"
        ]
      ]
    },
    "generated_images": [
      {
        "placeholder": "PLACEHOLDER-1",
        "filename": "13be97ee-1.webp",
        "title": "SQL Server Error 18456 Overview",
        "path": "staging/images/13be97ee-1.png"
      },
      {
        "placeholder": "PLACEHOLDER-2",
        "filename": "13be97ee-2.webp",
        "title": "Enable Mixed Mode Authentication",
        "path": "staging/images/13be97ee-2.png"
      },
      {
        "placeholder": "PLACEHOLDER-3",
        "filename": "13be97ee-3.webp",
        "title": "Restart SQL Server Service",
        "path": "staging/images/13be97ee-3.png"
      },
      {
        "placeholder": "PLACEHOLDER-4",
        "filename": "13be97ee-4.webp",
        "title": "Event Viewer for SQL Server Errors",
        "path": "staging/images/13be97ee-4.png"
      }
    ],
    "source_file": "/Users/thaddeus/Documents/on-going projects/deepv-stackoverflow-workflow-complete/data/crawled_data/20923015.json",
    "workflow_version": "deepv_stackoverflow_v2.0_schema_compliant",
    "generated_at": "2025-09-22T23:02:33.047276",
    "word_count": 2122,
    "code_blocks": 2
  }
}