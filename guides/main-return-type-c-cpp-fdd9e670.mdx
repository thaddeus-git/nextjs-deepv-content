---
title: "Understanding main() Return Types in C and C++: int vs. void"
slug: "main-return-type-c-cpp"
category: "programming-languages"
subcategory: "c"
description: "Explore the correct return types for main() in C and C++, the significance of exit codes, and standard-compliant practices for hosted and freestanding environments."
tags: ["c","c++","main-function","return-value","exit-code","standard-compliance","program-entry-point"]
difficulty: "intermediate"
readTime: 10
lastUpdated: "2025-09-22T16:16:54.235Z"
featured: false
---

# Understanding `main()` Return Types in C and C++: `int` vs. `void`

The `main()` function is the entry point of every C and C++ program. Its return type and arguments are crucial for proper program execution and communication with the operating system or execution environment. This guide clarifies the standard-compliant ways to define `main()`, the meaning of its return value, and considerations for different environments.

## Quick Answer

In C and C++, the `main()` function **must** have a return type of `int`. `void main()` is non-standard and should be avoided in hosted environments. A return value of `0` (or `EXIT_SUCCESS`) indicates successful program termination, while a non-zero value (or `EXIT_FAILURE`) signals an error.

```cpp
// Standard-compliant main() function in C and C++
int main() {
    // Program logic here
    return 0; // Indicates successful execution
}

// With command-line arguments
int main(int argc, char* argv[]) {
    // Program logic using arguments
    return 0;
}
```

## Choose Your Method

The choice of `main()` signature and return value largely depends on your environment and whether you need to process command-line arguments or communicate detailed exit status.

```mermaid
graph TD
    A[Start Program] --> B{Hosted Environment (OS)?};
    B -- Yes --> C{Need Command-Line Arguments?};
    B -- No (Freestanding) --> D[Implementation-defined entry point];
    C -- Yes --> E[int main(int argc, char* argv[])];
    C -- No --> F[int main()];
    E --> G{Need Specific Exit Status?};
    F --> G;
    G -- Yes --> H[Return 0 for success, non-zero for failure];
    G -- No (Implicit 0) --> I[Allow implicit return 0 (C99/C++11+)];
    H --> J[End Program];
    I --> J;
    D --> K[No standard return value, often void];
    K --> J;
```
![Decision Tree for main() Signature](PLACEHOLDER: Decision Tree for main() Signature - /images/48619af9-1.webp)

## Standard `main()` Signatures

Both C and C++ standards define specific signatures for the `main()` function in a hosted environment (i.e., when your program runs under an operating system).

### C++ Standard Signatures

According to the C++ standard (e.g., C++11 and later), the `main` function must have a return type of `int`. The two universally allowed forms are:

```cpp
int main() {
    // ...
    return 0;
}
```

```cpp
int main(int argc, char* argv[]) {
    // argc: number of command-line arguments
    // argv: array of strings (char pointers) representing the arguments
    // ...
    return 0;
}
```
The C++ standard explicitly states that `main` shall not be overloaded and must have a return type of `int`. If control reaches the end of `main` without a `return` statement, it implicitly executes `return 0;`.

### C Standard Signatures

The C standard (e.g., C11) also mandates an `int` return type for `main` in a hosted environment. The primary forms are:

```c
int main(void) { // 'void' explicitly states no arguments
    // ...
    return 0;
}
```

```c
int main(int argc, char* argv[]) {
    // ...
    return 0;
}
```
In C99 and later, if `main` finishes without an explicit `return` statement, it implicitly returns `0`. In C90, omitting `return` from `main` resulted in undefined behavior.

### `void main()`: Why it's Non-Standard

Using `void main()` is a common non-standard extension supported by some compilers (especially older ones or those targeting embedded systems). However, it violates both the C and C++ standards for hosted environments. The primary reason it's disallowed is that the return value of `main` is used by the calling environment (e.g., the operating system shell) to determine the program's exit status. A `void` return type prevents this communication.

## Understanding `main()` Return Values

The integer value returned by `main()` serves as an exit status for the program.

### `0` or `EXIT_SUCCESS` for Success

A return value of `0` conventionally indicates that the program executed successfully without any errors. The `<cstdlib>` header (or `<stdlib.h>` in C) defines the macro `EXIT_SUCCESS`, which is guaranteed to be a value that indicates successful termination. It's often `0`.

```cpp
#include <cstdlib> // For EXIT_SUCCESS and EXIT_FAILURE

int main() {
    // Program logic...
    if (/* everything went well */) {
        return EXIT_SUCCESS; // Standard way to indicate success
    } else {
        // Handle error
        return EXIT_FAILURE; // Standard way to indicate failure
    }
}
```

### Non-Zero or `EXIT_FAILURE` for Errors

Any non-zero return value typically indicates that the program encountered an error or terminated abnormally. The specific meaning of non-zero values is implementation-defined, though `1` is a common general error code. `EXIT_FAILURE` from `<cstdlib>` is the standard-compliant way to signal an unsuccessful termination.

### Example: Using Exit Codes in a Shell

The exit code of a program can be accessed in shell scripts to control workflow.

```bash
# Compile a C++ program
g++ my_program.cpp -o my_program

# Run the program
./my_program
```
To check the exit status in a Unix-like shell (Bash, Zsh, etc.):

```bash
echo $?
# Output: 0 (if my_program returned 0 or EXIT_SUCCESS)
```

If `my_program` returned a non-zero value:

```bash
./my_program_with_error
echo $?
# Output: 1 (or any other non-zero value returned by the program)
```
This allows for conditional execution in scripts:

```bash
./my_program
if [ $? -eq 0 ]; then
    echo "Program executed successfully."
else
    echo "Program failed with exit code $?."
fi
```
![Shell Script Using Exit Codes](PLACEHOLDER: Shell Script Using Exit Codes - PLACEHEDER-2)

### Portability and OS Truncation

While `main()` returns an `int`, many operating systems (including Unix-like systems and Windows) may truncate the exit status to an 8-bit unsigned integer (0-255). This means that if your program returns a value outside this range, it might be modified by the OS. For example, returning `256` might be seen as `0` by the shell. Therefore, it's best to keep exit codes within the 0-255 range for maximum portability.

## Arguments to `main()`: `argc` and `argv`

The `argc` and `argv` parameters allow a program to receive command-line arguments.

-   `argc` (argument count): An integer representing the number of arguments passed to the program, including the program's name itself.
-   `argv` (argument vector): An array of C-style strings (`char*`) where each string is one of the command-line arguments. `argv[0]` is typically the name of the program, `argv[1]` is the first argument, and so on. `argv[argc]` is guaranteed to be a null pointer.

```cpp
#include <iostream>
#include <string>

int main(int argc, char* argv[]) {
    std::cout << "Program name: " << argv[0] << std::endl;
    std::cout << "Number of arguments: " << argc << std::endl;

    for (int i = 1; i < argc; ++i) {
        std::cout << "Argument " << i << ": " << argv[i] << std::endl;
    }

    return 0;
}
```
If you compile and run this program as `./my_program hello world 123`:

```output
Program name: ./my_program
Number of arguments: 4
Argument 1: hello
Argument 2: world
Argument 3: 123
```

## Freestanding Environments

In a freestanding environment (e.g., embedded systems without an operating system), the rules for `main()` are much more relaxed. The name and type of the function called at program startup are implementation-defined. It might not even be called `main`, and its return type could be `void` or anything else, as there's no OS to receive an exit status.

```c
// Example for a freestanding environment (non-standard for hosted)
void startup_function() {
    // Initialize hardware, run main loop
    while (1) {
        // ...
    }
    // No return, or system reset
}
```
For typical application development on desktop or server systems, you will almost always be in a hosted environment and should adhere to the `int main()` signature.

## Omitting `return 0;`

Since C99 and C++98, if `main()` is declared with an `int` return type and control reaches the closing brace `}` without an explicit `return` statement, the effect is equivalent to `return 0;`. This is a convenience feature.

```cpp
int main() {
    // Program logic
    // No explicit return statement here
} // Implicitly returns 0
```
While standard-compliant, some developers prefer to explicitly write `return 0;` for clarity and to maintain consistency with other functions that require explicit returns.

## Summary

-   **Return Type**: `main()` **must** return `int` in hosted C and C++ environments. `void main()` is non-standard.
-   **Exit Status**: `0` or `EXIT_SUCCESS` indicates success. Non-zero or `EXIT_FAILURE` indicates an error.
-   **Arguments**: Use `int main(int argc, char* argv[])` to access command-line arguments.
-   **Implicit Return**: C99/C++98 and later standards implicitly return `0` if `main()` finishes without an explicit `return` statement.
-   **Portability**: Keep exit codes within 0-255 for maximum compatibility across operating systems.
-   **Freestanding**: Rules are implementation-defined; `main` might not even exist or could have a `void` return type.

Adhering to these guidelines ensures your C and C++ programs are standard-compliant, portable, and effectively communicate their execution status to the calling environment.

---

## Image Generation Prompts

**PLACEHOLDER-1:** A flowchart diagram illustrating the decision process for choosing the correct `main()` signature and return value. Start with "Start Program", branch to "Hosted Environment (OS)?" (Yes/No). "Yes" branches to "Need Command-Line Arguments?" (Yes/No). "No" (Freestanding) branches to "Implementation-defined entry point". The "Need Command-Line Arguments?" branches lead to `int main(int argc, char* argv[])` and `int main()`. Both then lead to "Need Specific Exit Status?" (Yes/No). "Yes" leads to "Return 0 for success, non-zero for failure". "No" leads to "Allow implicit return 0 (C99/C++11+)". All paths converge to "End Program". Use distinct colors for decision points and actions.

**PLACEHEDER-2:** A terminal screenshot showing a sequence of bash commands. First, a `g++` command compiling a C++ program named `my_program.cpp` into an executable `my_program`. Then, `./my_program` is executed, followed by `echo $?` which outputs `0`. Next, `./my_program_with_error` is executed (implying it returns a non-zero code), followed by `echo $?` which outputs `1`. Finally, an `if` statement using `$?` to print "Program executed successfully." or "Program failed with exit code 1." based on the previous command's exit status. The terminal should have a dark background and light text.