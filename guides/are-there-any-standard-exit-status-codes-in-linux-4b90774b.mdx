---
title: "Are there any standard exit status codes in Linux?: Complete Guide"
slug: "are-there-any-standard-exit-status-codes-in-linux"
category: "system-devops"
subcategory: "linux"
description: "Yes, there are standard conventions for exit status codes in Linux, though not all codes are universally mandated. The most fundamental standard is that an e..."
tags: ["linux","error-handling","exit-code"]
difficulty: "intermediate"
readTime: 26
lastUpdated: "2025-09-19T02:29:04.056Z"
featured: true
---

# Are there any standard exit status codes in Linux?: Complete Guide with 0 Solutions

## Quick Answer

Yes, there are standard conventions for exit status codes in Linux, though not all codes are universally mandated. The most fundamental standard is that an exit status of `0` signifies successful execution, while any non-zero value indicates an error or abnormal termination. Specific non-zero values often correspond to different types of errors, with some being defined by POSIX or common shell practices, and others being application-specific. For instance, `1` typically denotes a general error, `2` often indicates misuse of shell builtins or command-line syntax, and values like `126`, `127`, `128+N` have specific meanings related to command execution and signal termination.

```bash
# Example: Check the exit status of the last command
ls /nonexistent_directory
echo $? # Will likely output 2 (No such file or directory)

ls /
echo $? # Will output 0 (Success)
```

## Choose Your Method

Navigating the world of Linux exit codes can be nuanced. This decision tree will help you understand which aspects are most relevant to your current needs, whether you're debugging, scripting, or developing.

```mermaid
graph TD
    A[Start: What do you want to know about Linux Exit Codes?] --> B{Are you checking a program's exit status?};

    B -- Yes --> C{Is the program a standard utility or your own script?};
    B -- No --> D{Are you defining exit codes for your own script/application?};

    C -- Standard Utility --> E{Are you looking for success (0) or failure (non-zero)?};
    C -- Your Own Script --> F{Are you debugging an unexpected exit code?};

    E -- Success (0) --> G[Exit Status 0: Always success. See "The Golden Rule: Exit Status 0 for Success".];
    E -- Failure (non-zero) --> H{What kind of failure?};

    H -- General Error --> I[Exit Status 1: General error. See "Common Exit Status Codes: 1-125".];
    H -- Command Not Found --> J[Exit Status 127: Command not found. See "Special Exit Status Codes: 126-255".];
    H -- Command Not Executable --> K[Exit Status 126: Command invoked cannot execute. See "Special Exit Status Codes: 126-255".];
    H -- Signal Termination --> L[Exit Status 128+N: Terminated by signal N. See "Signal-Related Exit Status Codes".];
    H -- Invalid Arguments --> M[Exit Status 2: Misuse of shell builtins or invalid arguments. See "Common Exit Status Codes: 1-125".];
    H -- Other Specific Error --> N[Check program's documentation or source code. See "Application-Specific Exit Codes".];

    F -- Yes --> O{Is the code < 128 or >= 128?};
    F -- < 128 --> P[Likely an application-defined error or standard error (1, 2). See "Debugging Unexpected Exit Codes".];
    F -- >= 128 --> Q{Is it 126 or 127?};
    Q -- Yes --> R[126: Command not executable. 127: Command not found. See "Special Exit Status Codes: 126-255".];
    Q -- No, 128+N --> S[Terminated by signal N. Use `kill -l` to find signal name. See "Signal-Related Exit Status Codes".];

    D -- Yes --> T{Do you need to differentiate specific error types?};
    T -- Yes --> U[Define custom non-zero codes (1-125) for different errors. Document them! See "Defining Custom Exit Codes".];
    T -- No, just success/failure --> V[Use 0 for success, 1 for any failure. See "The Golden Rule: Exit Status 0 for Success".];

    G --> Z[End]; I --> Z; J --> Z; K --> Z; L --> Z; M --> Z; N --> Z; P --> Z; R --> Z; S --> Z; U --> Z; V --> Z;
```

## Table of Contents
- [The Golden Rule: Exit Status 0 for Success](#the-golden-rule-exit-status-0-for-success)
- [Common Exit Status Codes: 1-125](#common-exit-status-codes-1-125)
- [Special Exit Status Codes: 126-255](#special-exit-status-codes-126-255)
- [Signal-Related Exit Status Codes](#signal-related-exit-status-codes)
- [Application-Specific Exit Codes](#application-specific-exit-codes)
- [Defining Custom Exit Codes in Scripts](#defining-custom-exit-codes-in-scripts)
- [Retrieving Exit Status](#retrieving-exit-status)
- [Performance Comparison](#performance-comparison)
- [Linux Version Support](#linux-version-support)
- [Common Problems & Solutions](#common-problems--solutions)
- [Real-World Use Cases](#real-world-use-cases)
- [Related: Other Linux Operations](#related-other-linux-operations)
- [Summary](#summary)
- [Frequently Asked Questions](#frequently-asked-questions)
- [Tools & Resources](#tools--resources)

## Ready-to-Use Code

Here are some essential copy-paste code snippets for working with and understanding Linux exit codes.

### 1. Checking the Exit Status of the Last Command

This is the most fundamental operation. The special shell variable `$?` holds the exit status of the most recently executed foreground command.

```bash
# Example 1: Successful command
ls /tmp
echo "Exit status: $?" # Expected output: Exit status: 0

# Example 2: Command with a general error
grep "nonexistent_pattern" /nonexistent_file 2>/dev/null
echo "Exit status: $?" # Expected output: Exit status: 1 or 2 (depending on grep version/context)

# Example 3: Command not found
nonexistent_command_xyz
echo "Exit status: $?" # Expected output: Exit status: 127
```

### 2. Exiting a Script with a Specific Status

Use the `exit` command within your shell scripts to explicitly set the exit status.

```bash
#!/bin/bash
# script_success.sh

echo "This script will exit successfully."
exit 0
```

```bash
#!/bin/bash
# script_failure.sh

echo "This script encountered an error."
# Use a custom error code, e.g., 5 for "configuration error"
exit 5
```

To run and check:
```bash
bash script_success.sh
echo $? # Output: 0

bash script_failure.sh
echo $? # Output: 5
```

### 3. Handling Exit Status in Conditional Logic

Exit codes are crucial for `if` statements, `while` loops, and `&&`/`||` operators.

```bash
#!/bin/bash
# conditional_check.sh

# Try to create a directory, then check its success
mkdir /tmp/my_new_dir_$$ 2>/dev/null

if [ $? -eq 0 ]; then
    echo "Directory created successfully."
    rmdir /tmp/my_new_dir_$$ # Clean up
else
    echo "Failed to create directory. It might already exist or permissions are an issue."
fi

# Using && (logical AND) - command2 only runs if command1 succeeds
echo "Attempting to list and then echo success:"
ls /tmp && echo "ls /tmp succeeded!"

# Using || (logical OR) - command2 only runs if command1 fails
echo "Attempting to list a non-existent directory and then echo failure:"
ls /nonexistent_path || echo "ls /nonexistent_path failed!"
```

## The Golden Rule: Exit Status 0 for Success

**Persona:** 📚 Learning Explorer, 🚀 Speed Seeker, 🔧 Problem Solver

The most fundamental and universally accepted convention in Linux and POSIX-compliant systems is that an exit status of `0` signifies successful execution. Any non-zero value indicates some form of error or abnormal termination. This convention is deeply ingrained in shell scripting and forms the basis of conditional execution (`if`, `while`, `&&`, `||`).

When a program or script finishes its task without encountering any issues, it should exit with `0`. This allows other programs, scripts, or the shell itself to easily determine if the operation was successful.

### How it Works

The shell provides a special parameter, `$?`, which holds the exit status of the last executed foreground command.

```bash
# Example 1: Successful command
cp /etc/hosts /tmp/myhosts_backup
echo "Exit status of cp: $?" # Output: 0

# Example 2: Command that fails
cp /nonexistent_file /tmp/myhosts_backup_fail 2>/dev/null
echo "Exit status of cp: $?" # Output: 1 (typically for file not found)
```

### Practical Implications

*   **Scripting Logic:** `if` statements in shell scripts evaluate the exit status of the command in their condition. An exit status of `0` is considered "true," and any non-zero status is "false."
    ```bash
    #!/bin/bash
    # check_file_exists.sh

    FILE="/etc/passwd"

    if grep -q "root" "$FILE"; then
        echo "User 'root' found in $FILE."
        exit 0 # Success
    else
        echo "User 'root' NOT found in $FILE."
        exit 1 # Failure
    fi
    ```
*   **Command Chaining:** The `&&` (logical AND) and `||` (logical OR) operators rely entirely on exit status.
    *   `command1 && command2`: `command2` executes only if `command1` exits with `0`.
    *   `command1 || command2`: `command2` executes only if `command1` exits with a non-zero status.
    ```bash
    # Create a directory and then change into it, only if creation succeeds
    mkdir my_project_dir && cd my_project_dir
    echo "Current directory: $(pwd)"

    # Try to remove a file; if it fails, echo an error message
    rm nonexistent_file || echo "Error: Could not remove file."
    ```
*   **Automation:** In CI/CD pipelines, cron jobs, or other automated tasks, checking the exit status is crucial for determining if a step completed successfully before proceeding to the next.

### Best Practices

*   **Always exit with 0 for success:** Even in simple scripts, explicitly using `exit 0` at the end of a successful path is good practice, though the shell will implicitly exit with the status of the last command if `exit` is not called.
*   **Document your success criteria:** For complex scripts, clearly define what constitutes "success" and ensure your script adheres to it.

This "golden rule" is the bedrock of robust shell scripting and process management in Linux.

## Common Exit Status Codes: 1-125

**Persona:** 📚 Learning Explorer, 🔧 Problem Solver, 🏗️ Architecture Builder

While `0` is for success, the non-zero range from `1` to `125` is generally available for programs to define their own specific error conditions. However, some values within this range have become de facto standards or are used by the shell for specific, common error types. Understanding these helps in debugging and writing more robust scripts.

### Exit Status 1: General Error, Catchall

This is the most common non-zero exit status. It signifies a general error, often when a more specific error code isn't defined or necessary. Many utilities use `1` for a variety of failures.

```bash
# Example: grep not finding a pattern
grep "nonexistent_pattern" /etc/passwd
echo "Exit status: $?" # Output: 1 (pattern not found)

# Example: rm failing due to permissions
sudo rm /root/some_file # Assuming you're not root and file exists
echo "Exit status: $?" # Output: 1 (Operation not permitted)
```

**When to use it in your scripts:**
*   For any failure that doesn't fit a more specific, custom error code.
*   As a default failure exit if no other error condition is met.

```bash
#!/bin/bash
# general_error_script.sh

if [ ! -f "important_config.conf" ]; then
    echo "Error: important_config.conf not found!" >&2
    exit 1 # General error
fi

echo "Configuration loaded successfully."
exit 0
```

### Exit Status 2: Misuse of Shell Builtins or Invalid Arguments

This code is often used by shell builtins (like `cd`, `test`, `exit`) and some external commands to indicate incorrect command-line arguments or misuse of the command itself.

```bash
# Example: test command with invalid arguments
test -f
echo "Exit status: $?" # Output: 2 (missing argument)

# Example: exit command with invalid argument
exit "hello" 2>/dev/null
echo "Exit status: $?" # Output: 2 (numeric argument required)

# Example: find command with invalid option
find . -nonexistent_option
echo "Exit status: $?" # Output: 1 (often, but sometimes 2 for argument errors)
```

**When to use it in your scripts:**
*   If your script receives invalid command-line arguments.
*   If a function within your script is called with incorrect parameters.

```bash
#!/bin/bash
# argument_error_script.sh

if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <filename>" >&2
    exit 2 # Invalid arguments
fi

FILE="$1"
if [ ! -f "$FILE" ]; then
    echo "Error: File '$FILE' not found." >&2
    exit 1 # General error (file not found)
fi

echo "Processing file: $FILE"
exit 0
```

### Other Common (but not strictly mandated) Codes

While `1` and `2` are the most common, some applications or conventions might use other codes in the `1-125` range. For instance:

*   **`128`**: Sometimes seen for "invalid argument to exit" in older shells, but `2` is more common now.
*   **`129-255`**: These are typically reserved for signal-related exits (see next section).

**Important Note:** For your own scripts and applications, you have the freedom to define custom exit codes within the `1-125` range. However, it's crucial to document these codes clearly for anyone using or maintaining your code. Avoid using `126` or `127` as these have very specific meanings assigned by the shell.

## Special Exit Status Codes: 126-255

**Persona:** 📚 Learning Explorer, 🔧 Problem Solver, 🏗️ Architecture Builder

The exit status codes from `126` to `255` have special meanings, primarily related to how the shell executes commands or how processes are terminated by signals. These are not typically used by applications to indicate their own internal errors, but rather reflect issues in the execution environment or external termination events.

### Exit Status 126: Command Invoked Cannot Execute

This status indicates that the command specified was found, but the shell could not execute it. This usually means a permission issue (the execute bit is not set) or the file is not a regular executable (e.g., it's a directory).

```bash
# Example: Trying to execute a file without execute permissions
touch my_script.sh
chmod 644 my_script.sh # No execute permission
./my_script.sh
echo "Exit status: $?" # Output: 126 (Permission denied)

# Example: Trying to execute a directory
mkdir my_dir
./my_dir
echo "Exit status: $?" # Output: 126 (Is a directory)
```

**Debugging Tip:** If you get `126`, check the file permissions (`ls -l`) and ensure it's a valid executable file.

### Exit Status 127: Command Not Found

This is a very common and distinct error. It means the shell could not find the specified command in any of the directories listed in the `PATH` environment variable.

```bash
# Example: A non-existent command
nonexistent_command_12345
echo "Exit status: $?" # Output: 127 (command not found)

# Example: A command not in PATH
/tmp/my_script.sh # If /tmp is not in PATH and you don't use full path
echo "Exit status: $?" # Output: 127 (if not found)
```

**Debugging Tip:** If you get `127`, double-check the command's spelling, ensure it's installed, and verify your `PATH` environment variable (`echo $PATH`).

### Exit Status 128 + N: Terminated by Signal N

This range is used when a process is terminated by a signal. The exit status will be `128` plus the signal number `N`. For example, if a process is terminated by `SIGKILL` (signal 9), its exit status will be `128 + 9 = 137`. If terminated by `SIGTERM` (signal 15), it will be `128 + 15 = 143`.

```bash
# Example: Process terminated by SIGKILL (signal 9)
# In one terminal:
# sleep 600 &
# echo $! > /tmp/sleep_pid.txt

# In another terminal:
# PID=$(cat /tmp/sleep_pid.txt)
# kill -9 $PID
# wait $PID # Wait for the background process to truly terminate
# echo "Exit status of killed process: $?" # Output: 137 (128 + 9)
```

**Common Signal-Related Exit Codes:**
*   **130 (128 + 2):** Terminated by `SIGINT` (Ctrl+C).
*   **137 (128 + 9):** Terminated by `SIGKILL`.
*   **139 (128 + 11):** Terminated by `SIGSEGV` (Segmentation Fault). This is the `11` you mentioned in your query!
*   **143 (128 + 15):** Terminated by `SIGTERM`.

**Debugging Tip:** If you see an exit status in this range, it means the program didn't exit gracefully on its own but was forcibly stopped by the operating system or another process. The signal number tells you *why*. You can use `kill -l` to list signal names and their corresponding numbers.

```bash
kill -l # List all signals
```

### Exit Status 255: Exit Status Out of Range

While `exit` commands typically take an argument from `0` to `255`, some shells might wrap values outside this range. For instance, `exit 256` might result in an exit status of `0` (256 modulo 256). However, `exit -1` or other negative values can sometimes result in `255` or other unexpected values depending on the shell. It's best to stick to the `0-255` range.

```bash
# Example: Using an out-of-range exit code (shell dependent)
# bash often wraps it:
( exit 256 ); echo $? # Output: 0
( exit 257 ); echo $? # Output: 1
( exit -1 ); echo $? # Output: 255 (in bash)
```

**Best Practice:** Always use exit codes between `0` and `255` to ensure consistent behavior across different shells and systems.

## Signal-Related Exit Status Codes

**Persona:** 📚 Learning Explorer, 🔧 Problem Solver, 🏗️ Architecture Builder

As discussed, exit codes in the range of `128 + N` (where `N` is the signal number) indicate that a process was terminated by a signal. This is a critical concept for understanding why programs crash or are forcibly stopped.

### Understanding Signals

Signals are a limited form of inter-process communication used in Unix-like operating systems. They are asynchronous notifications sent to a process to indicate an event. Some common events include:
*   **User-generated interrupts:** `Ctrl+C` (SIGINT), `Ctrl+Z` (SIGTSTP).
*   **Hardware exceptions:** Division by zero, invalid memory access (SIGSEGV).
*   **Software events:** Timer expiration (SIGALRM), child process termination (SIGCHLD).
*   **Termination requests:** `kill` command (SIGTERM, SIGKILL).

When a process receives a signal, it can:
1.  **Ignore** the signal (most signals can be ignored, but not `SIGKILL` or `SIGSTOP`).
2.  **Catch** the signal and execute a signal handler function.
3.  **Perform its default action**, which for many signals is to terminate the process.

If the default action is termination, the process exits with a status of `128 + signal_number`.

### Common Signal Exit Codes and Their Meanings

Here's a table of common signals and their corresponding exit statuses:

| Signal Number (N) | Signal Name | Default Action | Exit Status (128+N) | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ## Application-Specific Exit Codes

**Persona:** 🏗️ Architecture Builder, 📚 Learning Explorer, ⚡ Legacy Maintainer

Beyond the standard and signal-related codes, applications and scripts are free to define their own specific exit codes in the range of `1` to `125`. This is where the concept of "standard" becomes more about "convention" and "documentation."

### Why Define Custom Exit Codes?

*   **Granular Error Reporting:** A single "general error" (exit 1) might not be enough for complex applications. Custom codes allow you to distinguish between different types of failures (e.g., configuration error, database connection failure, invalid input, resource exhaustion).
*   **Automated Decision Making:** Downstream scripts or monitoring systems can react differently based on the specific error code. For example, a `config_error` might trigger an alert to an administrator, while a `transient_network_error` might trigger a retry mechanism.
*   **Improved Debugging:** When a program exits with a specific, documented error code, it immediately provides a hint about the root cause of the problem, reducing debugging time.

### Best Practices for Defining Custom Exit Codes

1.  **Document Thoroughly:** This is the most crucial step. Maintain a clear, accessible list of your application's exit codes and their meanings. This could be in a `README`, a man page, or internal documentation.
    ```markdown
    # MyAwesomeApp Exit Codes

    | Code | Meaning                               | Description                                                                  |
    |------|---------------------------------------|------------------------------------------------------------------------------|
    | 0    | Success                               | All operations completed without error.                                      |
    | 1    | General Error                         | Catch-all for unspecified failures.                                          |
    | 3    | Configuration File Missing/Invalid    | The required configuration file was not found or contained syntax errors.    |
    | 4    | Database Connection Failed            | Could not establish a connection to the database.                            |
    | 5    | Insufficient Permissions              | The user lacks necessary permissions for a specific operation.               |
    | 6    | Invalid Input Data                    | Input provided to the application was malformed or out of expected range.    |
    | 7    | Resource Exhaustion                   | Ran out of memory, disk space, or other critical system resources.           |
    ```

2.  **Keep it Consistent:** If you have multiple scripts or components, try to use a consistent set of error codes across them where applicable.
3.  **Avoid Reserved Codes:** Do not use `126`, `127`, or any code in the `128-255` range, as these have special meanings assigned by the shell/OS.
4.  **Start Small, Expand as Needed:** Don't try to define hundreds of codes upfront. Start with `1` for general errors and add specific codes as distinct failure modes emerge.
5.  **Provide Context:** When exiting with an error, always print a descriptive error message to `stderr` (`>&2`) to give the user more information.

### Example: Custom Exit Codes in a Python Script

This principle applies to any programming language, not just shell scripts.

```python
#!/usr/bin/env python3
# my_data_processor.py

import sys
import os

# Define custom exit codes
EXIT_SUCCESS = 0
EXIT_GENERAL_ERROR = 1
EXIT_CONFIG_ERROR = 3
EXIT_DB_CONNECTION_FAILED = 4
EXIT_INVALID_INPUT = 6

def load_config(config_path):
    if not os.path.exists(config_path):
        print(f"Error: Configuration file '{config_path}' not found.", file=sys.stderr)
        sys.exit(EXIT_CONFIG_ERROR)
    # Simulate config loading
    print(f"Config '{config_path}' loaded.")
    return {"db_host": "localhost", "db_port": 5432}

def connect_to_database(config):
    # Simulate DB connection attempt
    if config["db_host"] != "localhost": # Simulate a failure condition
        print("Error: Could not connect to database.", file=sys.stderr)
        sys.exit(EXIT_DB_CONNECTION_FAILED)
    print("Connected to database.")
    return True

def process_data(data):
    if not isinstance(data, list) or not all(isinstance(x, int) for x in data):
        print("Error: Invalid input data format. Expected a list of integers.", file=sys.stderr)
        sys.exit(EXIT_INVALID_INPUT)
    print(f"Processing {len(data)} items.")
    # Simulate data processing
    return sum(data)

def main():
    if len(sys.argv) < 2:
        print("Usage: python my_data_processor.py <config_file>", file=sys.stderr)
        sys.exit(EXIT_GENERAL_ERROR)

    config_file = sys.argv[1]
    config = load_config(config_file)
    
    connect_to_database(config)

    # Simulate some input data
    input_data = [10, 20, 30]
    result = process_data(input_data)
    print(f"Processing complete. Result: {result}")
    
    sys.exit(EXIT_SUCCESS)

if __name__ == "__main__":
    main()
```

To test this Python script:
```bash
# Create a dummy config file
echo "DB_HOST=localhost" > myapp.conf

# Successful run
python my_data_processor.py myapp.conf
echo $? # Output: 0

# Config file not found
python my_data_processor.py nonexistent.conf
echo $? # Output: 3

# Simulate DB connection failure (by modifying config in script)
# (You'd typically pass this as an argument or env var)
# For this example, let's just manually change `config["db_host"]` to something else
# in the script and re-run.
# If `connect_to_database` fails, it would exit with 4.

# Invalid input data (if we were to pass it as an argument)
# (This example doesn't take data as arg, but if it did, it would exit with 6)
```

By carefully defining and documenting application-specific exit codes, you significantly enhance the maintainability, debuggability, and automation capabilities of your software.

## Defining Custom Exit Codes in Scripts

**Persona:** 🚀 Speed Seeker, 🔧 Problem Solver, 🏗️ Architecture Builder

When writing your own shell scripts, you have full control over the exit status. This allows you to communicate the success or specific type of failure of your script to the calling environment (another script, a cron job, a CI/CD pipeline, or a human user).

### The `exit` Command

The `exit` command is used to terminate a shell script and return a specific exit status.

```bash
exit [N]
```
Where `N` is an integer between `0` and `255`.

*   If `N` is omitted, the exit status is that of the last command executed.
*   If `N` is `0`, it indicates success.
*   If `N` is a non-zero value (typically `1-125` for custom errors), it indicates a failure.

### Basic Usage

```bash
#!/bin/bash
# my_script.sh

echo "Starting script..."

# Simulate a successful operation
if [ -d "/tmp" ]; then
    echo "Temporary directory exists."
    # No explicit exit 0 needed here, as the last command (echo) would succeed
    # but it's good practice for clarity.
    exit 0
else
    echo "Error: /tmp directory not found!" >&2
    exit 1 # General error
fi
```

### Defining Specific Error Codes

For more complex scripts, it's beneficial to define distinct error codes for different failure conditions. This makes debugging and automated handling much easier.

```bash
#!/bin/bash
# advanced_script.sh

# --- Custom Exit Codes ---
readonly EXIT_SUCCESS=0
readonly EXIT_GENERAL_ERROR=1
readonly EXIT_MISSING_ARG=2
readonly EXIT_CONFIG_NOT_FOUND=3
readonly EXIT_SERVICE_UNAVAILABLE=4
readonly EXIT_PERMISSION_DENIED=5
# -------------------------

CONFIG_FILE="/etc/myapp/config.conf"
SERVICE_NAME="nginx"

# Function to display usage
usage() {
    echo "Usage: $0 <action>" >&2
    echo "Actions: start, stop, status" >&2
    exit $EXIT_MISSING_ARG
}

# Check for arguments
if [ "$#" -ne 1 ]; then
    usage
fi

ACTION="$1"

# Check if config file exists
if [ ! -f "$CONFIG_FILE" ]; then
    echo "Error: Configuration file '$CONFIG_FILE' not found." >&2
    exit $EXIT_CONFIG_NOT_FOUND
fi

# Simulate service control
case "$ACTION" in
    start)
        echo "Attempting to start $SERVICE_NAME..."
        # Simulate a service start failure due to permissions
        if [ "$EUID" -ne 0 ]; then # Check if not root
            echo "Error: Starting $SERVICE_NAME requires root privileges." >&2
            exit $EXIT_PERMISSION_DENIED
        fi
        # Actual service start command would go here, e.g., systemctl start $SERVICE_NAME
        echo "$SERVICE_NAME started successfully."
        exit $EXIT_SUCCESS
        ;;
    stop)
        echo "Attempting to stop $SERVICE_NAME..."
        # Simulate a service stop failure if service is not running
        if ! systemctl is-active --quiet "$SERVICE_NAME"; then
            echo "Warning: $SERVICE_NAME is not running." >&2
            exit $EXIT_SERVICE_UNAVAILABLE # Or EXIT_SUCCESS if idempotent stop is desired
        fi
        # Actual service stop command
        echo "$SERVICE_NAME stopped successfully."
        exit $EXIT_SUCCESS
        ;;
    status)
        echo "Checking status of $SERVICE_NAME..."
        if systemctl is-active --quiet "$SERVICE_NAME"; then
            echo "$SERVICE_NAME is running."
            exit $EXIT_SUCCESS
        else
            echo "$SERVICE_NAME is not running."
            exit $EXIT_SERVICE_UNAVAILABLE
        fi
        ;;
    *)
        echo "Error: Invalid action '$ACTION'." >&2
        usage # This will exit with EXIT_MISSING_ARG
        ;;
esac
```

### Testing the Script

```bash
# No arguments
bash advanced_script.sh
echo $? # Output: 2 (EXIT_MISSING_ARG)

# Invalid action
bash advanced_script.sh restart
echo $? # Output: 2 (EXIT_MISSING_ARG, via usage)

# Config file not found (assuming /etc/myapp/config.conf doesn't exist)
bash advanced_script.sh start
echo $? # Output: 3 (EXIT_CONFIG_NOT_FOUND)

# Start as non-root (assuming config file exists for this test)
# Create dummy config:
sudo mkdir -p /etc/myapp
sudo touch /etc/myapp/config.conf
bash advanced_script.sh start
echo $? # Output: 5 (EXIT_PERMISSION_DENIED)

# Start as root (assuming config file exists)
sudo bash advanced_script.sh start
echo $? # Output: 0 (EXIT_SUCCESS)

# Stop when service is not running (assuming nginx is not active)
bash advanced_script.sh stop
echo $? # Output: 4 (EXIT_SERVICE_UNAVAILABLE)

# Status when service is not running
bash advanced_script.sh status
echo $? # Output: 4 (EXIT_SERVICE_UNAVAILABLE)
```

### Key Takeaways for Script Authors

*   **Clarity over Cleverness:** Choose meaningful, distinct codes.
*   **Document:** Always document your custom exit codes within the script or in external documentation.
*   **Use `readonly`:** For shell variables holding exit codes, `readonly` improves script robustness.
*   **Error Messages to `stderr`:** Always print descriptive error messages to standard error (`>&2`) before exiting with a non-zero status. This helps users understand *why* the script failed.

By following these guidelines, your scripts will be more professional, easier to debug, and more amenable to integration into larger automated systems.

## Retrieving Exit Status

**Persona:** 🚀 Speed Seeker, 📚 Learning Explorer, 🔧 Problem Solver

Retrieving the exit status of a command is a fundamental operation in shell scripting and debugging. The shell provides a simple, yet powerful mechanism for this: the special parameter `$?`.

### The `$?` Special Parameter

After any command executes in the foreground, its exit status is stored in the `$?` variable. This variable holds an integer value between `0` and `255`.

```bash
# Basic usage
ls /etc/passwd
echo "Exit status of 'ls /etc/passwd': $?" # Output: 0

ls /nonexistent_file
echo "Exit status of 'ls /nonexistent_file': $?" # Output: 2 (or 1 depending on system/ls version)

# Important: $? always reflects the *last* foreground command
true
echo "Status after true: $?" # Output: 0
false
echo "Status after false: $?" # Output: 1
echo "Status after previous echo: $?" # Output: 0 (because the 'echo' command itself succeeded)
```

### Using `$?` in Conditional Statements

The primary use case for `$?` is in `if`, `while`, and `until` statements, as well as with `&&` and `||` operators.

#### `if` statements

```bash
#!/bin/bash
# check_command_status.sh

if command -v docker >/dev/null 2>&1; then
    echo "Docker is installed."
    # You can check the exit status of 'docker run' for example
    if docker run hello-world >/dev/null 2>&1; then
        echo "Docker daemon is running and responsive."
        exit 0
    else
        echo "Docker daemon is not running or has issues."
        exit 1
    fi
else
    echo "Docker is not installed."
    exit 127 # Command not found equivalent
fi
```

#### `&&` (Logical AND) and `||` (Logical OR)

These operators are syntactic sugar for `if` statements based on exit status.

*   `command1 && command2`: `command2` runs only if `command1` exits with `0`.
*   `command1 || command2`: `command2` runs only if `command1` exits with a non-zero status.

```bash
# Example: Create a directory and then list its contents
mkdir my_temp_dir && ls my_temp_dir
echo "Exit status of the chain: $?" # Output: 0 if both succeed

# Example: Try to remove a file, if it fails, print an error
rm nonexistent_file || echo "Error: Failed to remove file."
echo "Exit status of the chain: $?" # Output: 1 (from rm)

# Combine them:
# Try to compile, if success, run tests, else print error
gcc my_program.c -o my_program && ./my_program --test || echo "Compilation or test failed!"
```

#### `while` and `until` loops

Loops can continue or stop based on the exit status of a command.

```bash
#!/bin/bash
# wait_for_service.sh

SERVICE="nginx"
MAX_RETRIES=10
RETRY_COUNT=0

echo "Waiting for $SERVICE to become active..."

while ! systemctl is-active --quiet "$SERVICE" && [ "$RETRY_COUNT" -lt "$MAX_RETRIES" ]; do
    echo "Service $SERVICE not active yet. Retrying in 5 seconds..."
    sleep 5
    RETRY_COUNT=$((RETRY_COUNT + 1))
done

if systemctl is-active --quiet "$SERVICE"; then
    echo "$SERVICE is now active."
    exit 0
else
    echo "Error: $SERVICE did not become active after $MAX_RETRIES retries." >&2
    exit 1
fi
```

### Capturing Exit Status of Piped Commands

When commands are piped (`|`), the exit status of the *last* command in the pipeline is typically stored in `$?`. However, you often need the status of *all* commands in the pipe.

*   **Bash's `PIPESTATUS` array:** This array holds the exit status of each command in the most recently executed foreground pipeline. `PIPESTATUS[0]` is the first command, `PIPESTATUS[1]` is the second, and so on.

```bash
# Example: Check status of both grep and wc
grep "root" /etc/passwd | wc -l
echo "Exit status of grep: ${PIPESTATUS[0]}" # Output: 0
echo "Exit status of wc: ${PIPESTATUS[1]}"   # Output: 0

# Example: One command fails in the pipe
grep "nonexistent_user" /etc/passwd | wc -l
echo "Exit status of grep: ${PIPESTATUS[0]}" # Output: 1
echo "Exit status of wc: ${PIPESTATUS[1]}"   # Output: 0 (wc still processed empty input successfully)

# Example: Both fail
grep "nonexistent_user" /nonexistent_file 2>/dev/null | wc -l
echo "Exit status of grep: ${PIPESTATUS[0]}" # Output: 2 (or 1)
echo "Exit status of wc: ${PIPESTATUS[1]}"   # Output: 0
```

*   **`set -o pipefail`:** This shell option causes the exit status of a pipeline to be the exit status of the *last command that returned a non-zero status*, or zero if all commands returned zero. This is extremely useful for making pipelines fail early.

```bash
# Without pipefail
grep "nonexistent_user" /etc/passwd | wc -l
echo $? # Output: 0 (because wc -l succeeded)

# With pipefail
set -o pipefail
grep "nonexistent_user" /etc/passwd | wc -l
echo $? # Output: 1 (because grep failed)
set +o pipefail # Turn it off if not needed globally
```

### Retrieving Exit Status of Background Processes

If you run a command in the background using `&`, its exit status is not immediately available in `$?`. You need to use the `wait` command.

```bash
# Start a command in the background
sleep 5 &
PID=$! # Get the PID of the background process
echo "Sleep process started with PID: $PID"

# Do other stuff while sleep runs
echo "Doing other work..."
sleep 2

# Wait for the background process to finish and get its status
wait $PID
EXIT_STATUS=$?
echo "Sleep process (PID $PID) finished with exit status: $EXIT_STATUS" # Output: 0
```

Retrieving and correctly interpreting exit statuses is a cornerstone of effective Linux system administration and scripting.

## Performance Comparison

**Persona:** 🚀 Speed Seeker, 🏗️ Architecture Builder

When dealing with exit codes, "performance" isn't typically about the speed of checking `$?` (which is negligible). Instead, it refers to the efficiency and robustness of the *logic* built around exit codes, especially in complex scripts or automated systems. The choice of how you handle exit codes can impact overall system performance by preventing unnecessary operations, enabling quick failure detection, and optimizing resource usage.

| Aspect                       | Method/Approach                                    | Impact on Performance/Robustness                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      